# Context-free Grammars

## Exercise 4.2.1

Consider the context-free grammar:

<img src="https://i.upmath.me/svg/S%20%5Crightarrow%20SS%2B%20%7C%20SS*%20%7C%20a" alt="S \rightarrow SS+ | SS* | a" />

and the string aa+a*.

a) Give a leftmost derivation for the string.

<img src="https://i.upmath.me/svg/S%20%5CRightarrow%20SS*%20%5CRightarrow%20SS%2BS*%20%5CRightarrow%20aS%2BS*%20%5CRightarrow%20aa%2BS*%20%5CRightarrow%20aa%2Ba*" alt="S \Rightarrow SS* \Rightarrow SS+S* \Rightarrow aS+S* \Rightarrow aa+S* \Rightarrow aa+a*" />

b) Give a rightmost derivation for the string.

<img src="https://i.upmath.me/svg/S%20%5CRightarrow%20SS*%20%5CRightarrow%20Sa*%20%5CRightarrow%20SS%2Ba*%20%5CRightarrow%20Sa%2Ba*%20%5CRightarrow%20aa%2Ba*" alt="S \Rightarrow SS* \Rightarrow Sa* \Rightarrow SS+a* \Rightarrow Sa+a* \Rightarrow aa+a*" />

c) Give a parse tree for the string.

![4.2.1 parse tree](assets/4_2_1_parse_tree.png)

d) Is the grammar ambiguous or unambiguous? Justify your answer.

Unambiguous.

Since the derivation

<img src="https://i.upmath.me/svg/S%20%5CRightarrow%20SS%2B%20%5CRightarrow%20SS*S%2B%20%5CRightarrow%20aS*S%2B%20%5CRightarrow%20aa*S%2B%20%5CRightarrow%20aa*a%2B" alt="S \Rightarrow SS+ \Rightarrow SS*S+ \Rightarrow aS*S+ \Rightarrow aa*S+ \Rightarrow aa*a+" />

generates a different sentence. If it is a sub-derivation of a larger one, the larger one will generate a different sentence as well.

e) Describe the language generated by this grammar. 

It is the postfix arithmetic expressions only with addition and multiplication.

## Exercise 4.2.2

Repeat Exercise 4.2.1 for each of the following grammars and strings:

a) <img src="https://i.upmath.me/svg/S%20%5Crightarrow%200S1%20%7C%2001" alt="S \rightarrow 0S1 | 01" /> with string 000111.

The leftmost derivation is the same as the rightmost derivation.

<img src="https://i.upmath.me/svg/S%20%5CRightarrow%200S1%20%5CRightarrow%2000S11%20%5CRightarrow%20000111%20" alt="S \Rightarrow 0S1 \Rightarrow 00S11 \Rightarrow 000111 " />

![4.2.2 a) parse tree](assets/4_2_2_a_parse_tree.png)

Obviously, the grammar is unambiguous. It represents strings a sequence of zeros followed by the same number of ones.

b) <img src="https://i.upmath.me/svg/S%20%5Crightarrow%20%2BSS%20%7C%20*SS%20%7C%20a" alt="S \rightarrow +SS | *SS | a" /> with string +*aaa.

The leftmost derivation is as follows:

<img src="https://i.upmath.me/svg/S%20%5CRightarrow%20%2BSS%20%5CRightarrow%20%2B*SSS%20%5CRightarrow%20%2B*aSS%20%5CRightarrow%20%2B*aaS%20%5CRightarrow%20%2B*aaa" alt="S \Rightarrow +SS \Rightarrow +*SSS \Rightarrow +*aSS \Rightarrow +*aaS \Rightarrow +*aaa" />

The rightmost derivation:

<img src="https://i.upmath.me/svg/S%20%5CRightarrow%20%2BSS%20%5CRightarrow%20%2BSa%20%5CRightarrow%20%2B*SSa%20%5CRightarrow%20%2B*Saa%20%5CRightarrow%20%2B*aaa" alt="S \Rightarrow +SS \Rightarrow +Sa \Rightarrow +*SSa \Rightarrow +*Saa \Rightarrow +*aaa" />

![4.2.2 b) parse tree](assets/4_2_2_b_parse_tree.png)

The grammar recognizes prefix arithmetic expressions involving only addition and multiplication.
It is unambiguous for the similar reason to [Exercise 4.2.1](#exercise-421)

c) <img src="https://i.upmath.me/svg/S%20%5Crightarrow%20S(S)S%20%7C%20%5Cepsilon" alt="S \rightarrow S(S)S | \epsilon" /> with string (()()).

The leftmost derivation:

<img src="https://i.upmath.me/svg/S%20%5CRightarrow%20S(S)S%20%5CRightarrow%20(S)S%20%5CRightarrow%20(S(S)S)S%20%5CRightarrow%20((S)S)S%20%5CRightarrow%20(()S)S%20%5CRightarrow%20(()S()S)S%20%5CRightarrow%20(()()S)S%20%5CRightarrow%20(()())S%20%5CRightarrow%20(()())" alt="S \Rightarrow S(S)S \Rightarrow (S)S \Rightarrow (S(S)S)S \Rightarrow ((S)S)S \Rightarrow (()S)S \Rightarrow (()S()S)S \Rightarrow (()()S)S \Rightarrow (()())S \Rightarrow (()())" />

The rightmost derivation:

<img src="https://i.upmath.me/svg/S%20%5CRightarrow%20S(S)S%20%5CRightarrow%20S(S)%20%5CRightarrow%20S(S(S)S)%20%5CRightarrow%20S(S())%20%5CRightarrow%20S(S(S)S())%20%5CRightarrow%20S(S(S)())%20%5CRightarrow%20S(S()())%20%5CRightarrow%20S(()())%20%5CRightarrow%20(()())%20" alt="S \Rightarrow S(S)S \Rightarrow S(S) \Rightarrow S(S(S)S) \Rightarrow S(S()) \Rightarrow S(S(S)S()) \Rightarrow S(S(S)()) \Rightarrow S(S()()) \Rightarrow S(()()) \Rightarrow (()()) " />

![4.2.2 c) parse tree](assets/4_2_2_c_parse_tree.png)

This grammar is ambiguous, for example two different leftmost derivations leading to the same sentence:

<img src="https://i.upmath.me/svg/S%20%5CRightarrow%20S(S)S%20%5CRightarrow%20S(S)S(S)S%20%5CRightarrow%20(S)S(S)S%20%5CRightarrow%20()S(S)S%20%5CRightarrow%20()(S)S%20%5CRightarrow%20()()S%20%5CRightarrow%20()()" alt="S \Rightarrow S(S)S \Rightarrow S(S)S(S)S \Rightarrow (S)S(S)S \Rightarrow ()S(S)S \Rightarrow ()(S)S \Rightarrow ()()S \Rightarrow ()()" />

<img src="https://i.upmath.me/svg/S%20%5CRightarrow%20S(S)S%20%5CRightarrow%20(S)S%20%5CRightarrow%20()S%20%5CRightarrow%20()S(S)S%20%5CRightarrow%20()(S)S%20%5CRightarrow%20()()S%20%5CRightarrow%20()()" alt="S \Rightarrow S(S)S \Rightarrow (S)S \Rightarrow ()S \Rightarrow ()S(S)S \Rightarrow ()(S)S \Rightarrow ()()S \Rightarrow ()()" />

Parenthesis-balanced strings can be generated by the grammar.

d) <img src="https://i.upmath.me/svg/S%20%5Crightarrow%20S%2BS%20%7C%20SS%20%7C%20(S)%20%7C%20S*%20%7C%20a" alt="S \rightarrow S+S | SS | (S) | S* | a" /> with string (a+a)*a.

The leftmost derivation:

<img src="https://i.upmath.me/svg/S%20%5CRightarrow%20SS%20%5CRightarrow%20S*S%20%5CRightarrow%20(S)*S%20%5CRightarrow%20(S%2BS)*S%20%5CRightarrow%20(a%2BS)*S%20%5CRightarrow%20(a%2Ba)*S%20%5CRightarrow%20(a%2Ba)*a" alt="S \Rightarrow SS \Rightarrow S*S \Rightarrow (S)*S \Rightarrow (S+S)*S \Rightarrow (a+S)*S \Rightarrow (a+a)*S \Rightarrow (a+a)*a" />

The rightmost derivation:

<img src="https://i.upmath.me/svg/S%20%5CRightarrow%20SS%20%5CRightarrow%20Sa%20%5CRightarrow%20S*a%20%5CRightarrow%20(S)*a%20%5CRightarrow%20(S%2BS)*a%20%5CRightarrow%20(S%2Ba)*a%20%5CRightarrow%20(a%2Ba)*a" alt="S \Rightarrow SS \Rightarrow Sa \Rightarrow S*a \Rightarrow (S)*a \Rightarrow (S+S)*a \Rightarrow (S+a)*a \Rightarrow (a+a)*a" />

![4.2.2 d) parse tree](assets/4_2_2_d_parse_tree.png)

The grammar is ambiguous since two different leftmost derivations lead to the same sentence:

<img src="https://i.upmath.me/svg/S%20%5CRightarrow%20SS%20%5CRightarrow%20S%2BSS%20%5CRightarrow%20a%2BSS%20%5CRightarrow%20a%2BS*S%20%5CRightarrow%20a%2Ba*S%20%5CRightarrow%20a%2Ba*a" alt="S \Rightarrow SS \Rightarrow S+SS \Rightarrow a+SS \Rightarrow a+S*S \Rightarrow a+a*S \Rightarrow a+a*a" />

<img src="https://i.upmath.me/svg/S%20%5CRightarrow%20SS%20%5CRightarrow%20S*S%20%5CRightarrow%20S%2BS*S%20%5CRightarrow%20a%2BS*S%20%5CRightarrow%20a%2Ba*S%20%5CRightarrow%20a%2Ba*a" alt="S \Rightarrow SS \Rightarrow S*S \Rightarrow S+S*S \Rightarrow a+S*S \Rightarrow a+a*S \Rightarrow a+a*a" />

e) <img src="https://i.upmath.me/svg/S%20%5Crightarrow%20(L)%20%7C%20a" alt="S \rightarrow (L) | a" /> and <img src="https://i.upmath.me/svg/L%20%5Crightarrow%20L%2CS%20%7C%20S" alt="L \rightarrow L,S | S" /> with string ((a,a),a,(a)).

The leftmost derivation:

<img src="https://i.upmath.me/svg/S%20%5CRightarrow%20(L)%20%5CRightarrow%20(L%2CS)%20%5CRightarrow%20(L%2CS%2CS)%20%5CRightarrow%20(S%2CS%2CS)%20%5CRightarrow%20((L)%2CS%2CS)%20%5CRightarrow%20((L%2CS)%2CS%2CS)%20%5CRightarrow%20((S%2CS)%2CS%2CS)%20%5CRightarrow%20((a%2CS)%2CS%2CS)%20%5CRightarrow%20((a%2Ca)%2CS%2CS)%20%5CRightarrow%20((a%2Ca)%2Ca%2CS)%20%5CRightarrow%20((a%2Ca)%2Ca%2C(L))%20%5CRightarrow%20((a%2Ca)%2Ca%2C(S))%20%5CRightarrow%20((a%2Ca)%2Ca%2C(a))" alt="S \Rightarrow (L) \Rightarrow (L,S) \Rightarrow (L,S,S) \Rightarrow (S,S,S) \Rightarrow ((L),S,S) \Rightarrow ((L,S),S,S) \Rightarrow ((S,S),S,S) \Rightarrow ((a,S),S,S) \Rightarrow ((a,a),S,S) \Rightarrow ((a,a),a,S) \Rightarrow ((a,a),a,(L)) \Rightarrow ((a,a),a,(S)) \Rightarrow ((a,a),a,(a))" />

The rightmost derivation:

<img src="https://i.upmath.me/svg/S%20%5CRightarrow%20(L)%20%5CRightarrow%20(L%2CS)%20%5CRightarrow%20(L%2C(L))%20%5CRightarrow%20(L%2C(S))%20%5CRightarrow%20(L%2C(a))%20%5CRightarrow%20(L%2CS%2C(a))%20%5CRightarrow%20(L%2Ca%2C(a))%20%5CRightarrow%20(S%2Ca%2C(a))%20%5CRightarrow%20((L)%2Ca%2C(a))%20%5CRightarrow%20((L%2CS)%2Ca%2C(a))%20%5CRightarrow%20((L%2Ca)%2Ca%2C(a))%20%5CRightarrow%20((S%2Ca)%2Ca%2C(a))%20%5CRightarrow%20((a%2Ca)%2Ca%2C(a))" alt="S \Rightarrow (L) \Rightarrow (L,S) \Rightarrow (L,(L)) \Rightarrow (L,(S)) \Rightarrow (L,(a)) \Rightarrow (L,S,(a)) \Rightarrow (L,a,(a)) \Rightarrow (S,a,(a)) \Rightarrow ((L),a,(a)) \Rightarrow ((L,S),a,(a)) \Rightarrow ((L,a),a,(a)) \Rightarrow ((S,a),a,(a)) \Rightarrow ((a,a),a,(a))" />

![4.2.2 e) parse tree](assets/4_2_2_e_parse_tree.png)

The grammar recognizes strings like tuples.

f) <img src="https://i.upmath.me/svg/S%20%5Crightarrow%20aSbS%20%7C%20bSaS%20%7C%20%5Cepsilon" alt="S \rightarrow aSbS | bSaS | \epsilon" /> with string aabbab

The leftmost derivation:

<img src="https://i.upmath.me/svg/S%20%5CRightarrow%20aSbS%20%5CRightarrow%20aaSbSbS%20%5CRightarrow%20aabSbS%20%5CRightarrow%20aabbS%20%5CRightarrow%20aabbaSbS%20%5CRightarrow%20aabbabS%20%5CRightarrow%20aabbab" alt="S \Rightarrow aSbS \Rightarrow aaSbSbS \Rightarrow aabSbS \Rightarrow aabbS \Rightarrow aabbaSbS \Rightarrow aabbabS \Rightarrow aabbab" />

The rightmost derivation:

<img src="https://i.upmath.me/svg/S%20%5CRightarrow%20aSbS%20%5CRightarrow%20aSbaSbS%20%5CRightarrow%20aSbaSb%20%5CRightarrow%20aSbab%20%5CRightarrow%20aaSbSbab%20%5CRightarrow%20aaSbbab%20%5CRightarrow%20aabbab" alt="S \Rightarrow aSbS \Rightarrow aSbaSbS \Rightarrow aSbaSb \Rightarrow aSbab \Rightarrow aaSbSbab \Rightarrow aaSbbab \Rightarrow aabbab" />

This grammar is ambiguous, and it can generate strings with equal number of a's and b's.

g) It is unambiguous, and recognizes boolean expressions.

## 4.2.3

Design grammars for the following languages:

a) The set of all strings of 0s and 1s such that every 0 is immediately
followed by at least one 1.

<img src="https://i.upmath.me/svg/S%20%5Crightarrow%201S%20%7C%2001S%20%7C%20%5Cepsilon" alt="S \rightarrow 1S | 01S | \epsilon" />

b) The set of all strings of 0s and 1s that are palindromes; that is,
the string reads the same backward as forward.

<img src="https://i.upmath.me/svg/S%20%5Crightarrow%201S1%20%7C%200S0%20%7C%201%20%7C%200%20%7C%20%5Cepsilon" alt="S \rightarrow 1S1 | 0S0 | 1 | 0 | \epsilon" />

c) The set of all strings of 0s and 1s with an equal number of 0s and 1s.

<img src="https://i.upmath.me/svg/S%20%5Crightarrow%200S1S%20%7C%201S0S%20%7C%20%5Cepsilon" alt="S \rightarrow 0S1S | 1S0S | \epsilon" />

d) The set of all strings of 0s and 1s with an unequal number of 0s and 1s.

<img src="https://i.upmath.me/svg/S%20%5Crightarrow%201T%20%7C%200T" alt="S \rightarrow 1T | 0T" />

<img src="https://i.upmath.me/svg/T%20%5Crightarrow%200S1S%20%7C%201S0S%20%7C%20%5Cepsilon" alt="T \rightarrow 0S1S | 1S0S | \epsilon" />

e) The set of all strings of 0s and 1s in which 011 does not appear as a substring.

<img src="https://i.upmath.me/svg/S%20%5Crightarrow%201S%20%7C%20X" alt="S \rightarrow 1S | X" />

<img src="https://i.upmath.me/svg/X%20%5Crightarrow%200Z1X%20%7C%20%5Cepsilon" alt="X \rightarrow 0Z1X | \epsilon" />

<img src="https://i.upmath.me/svg/Z%20%5Crightarrow%200Z%20%7C%20%5Cepsilon" alt="Z \rightarrow 0Z | \epsilon" />

## 4.2.4

Proof:

<img src="https://i.upmath.me/svg/A%20%5Crightarrow%20X%20Y%20Z" alt="A \rightarrow X Y Z" /> is equivalent to:

<img src="https://i.upmath.me/svg/A%20%5Crightarrow%20XWZ" alt="A \rightarrow XWZ" />

<img src="https://i.upmath.me/svg/W%20%5Crightarrow%20Y%20%7C%20%5Cepsilon" alt="W \rightarrow Y | \epsilon" />

<img src="https://i.upmath.me/svg/A%20%5Crightarrow%20X%20%5C%7BY%20Z%5C%7D" alt="A \rightarrow X \{Y Z\}" /> is equivalent to:

<img src="https://i.upmath.me/svg/A%20%5Crightarrow%20XW" alt="A \rightarrow XW" />

<img src="https://i.upmath.me/svg/W%20%5Crightarrow%20YZW%20%7C%20%5Cepsilon" alt="W \rightarrow YZW | \epsilon" />

## 4.2.5

I guess there is a mistake in the first production rule. If so, the simplified grammar is as follows

<img src="https://i.upmath.me/svg/stmt%20%5Crightarrow%20%7B%5Cbf%20if%7D%20%5C%20expr%20%5C%20%7B%5Cbf%20then%7D%20%5C%20stmt%20%5C%20%5B%7B%5Cbf%20else%7D%20%5C%20stmt%5D%20%5C%20%7C%20%5C%20%7B%5Cbf%20begin%7D%20%5C%20stmtList%20%5C%20%7B%5Cbf%20end%7D" alt="stmt \rightarrow {\bf if} \ expr \ {\bf then} \ stmt \ [{\bf else} \ stmt] \ | \ {\bf begin} \ stmtList \ {\bf end}" />

<img src="https://i.upmath.me/svg/stmtList%20%5Crightarrow%20stmt%20%5C%20%5C%7B%20%3B%20stmt%20%5C%7D" alt="stmtList \rightarrow stmt \ \{ ; stmt \}" />

## 4.2.6

A regular expression can be converted into a context-free grammar.

## 4.2.7

A [solution](https://www.cs.scranton.edu/~mccloske/courses/cmps260/cfg_remove_useless.html) on the Internet.

